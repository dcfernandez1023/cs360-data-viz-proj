<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="css/index.css" rel="stylesheet">
    <!-- Bootstrap 5 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    <!-- D3 CDN -->
    <script src="https://cdn.jsdelivr.net/npm/d3@7"></script>
    <script src="./js/section2.js"></script>
    <script src="./js/section3.js"></script>

    <link rel="stylesheet" href="js/range-slider-master/css/rSlider.min.css">
    <script src="js/range-slider-master/js/rSlider.min.js"></script>
    <title>NBA Data Viz Project | By: Dominic Fernandez</title>
</head>
<body class="default-background">

  <style>
    .shot-chart-court {
        fill:transparent;
        stroke:#333;
        stroke-width:0.1
    }
    .shot-chart-court-ft-circle-bottom{
        stroke-dasharray:1.5, 1
    }
    .shot-chart-court-hoop,.shot-chart-court-backboard{
        z-index:100
    }
    .shot-chart-title{
        font-size:15%;
        text-transform:uppercase
    }
    .legend text{
        font-size:4%
    }    
</style>

  <!-- Navbar -->
  <nav class="navbar navbar-expand-lg navbar-light default-background">
    <div class="container">
      <a class="navbar-brand" href="index.html">üèÄ NBA Data Viz Project</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse justify-content-end" id="navbarNavAltMarkup">
        <div class="navbar-nav">
          <a class="nav-link" aria-current="page" href="index.html">Home</a>
          <a class="nav-link" href="proposal.html">Proposal</a>
          <a class="nav-link" href="https://dom-portfolio.web.app/" target="_blank">Me</a>
        </div>
      </div>
    </div>
  </nav>

  <br>
  <br>

  <!-- Section 1: Title & Introduction -->
  <div class="container">
    <div class="row">
      <div class="col-md-3"></div>
      <div class="col-md-6">
          <div class="row">
            <div class="col">
              <h1>Which teams, players, and playing styles have dominated the NBA since 1980?</h1>
            </div>
          </div>
      </div>
      <div class="col-md-3"></div>
    </div>

    <div class="small-break"></div>

    <div class="row">
      <div class="col-md-3 center-align">
        <figure class="figure">
          <img src="images/mj.gif" class="figure-img img-fluid rounded">
        </figure>
      </div>
      <div class="col-md-6">
        <div class="row">
          <div class="col">
            <p class="header-secondary-text">
              Each season there are new teams, players, and playing styles that dominate the NBA. How do these change over the years?
            </p>
          </div>
        </div>
        <div class="row">
          <div class="col">
            <p class="medium-small-text">By: <a class="author-link" href="https://dom-portfolio.web.app/" target="_blank">Dominic Fernandez</a></p>
          </div>
        </div>
        <hr>
      </div>
      <div class="col-md-3"></div>
    </div>

    <div class="row">
      <div class="col-md-3"></div>
      <div class="col-md-6">
        <div class="row">
          <div class="col">
            <p class="medium-small-text">
              Season after season, it is easy to lose track of how NBA basketball changes and the teams, players, and coaches that drive these changes. 
              Evidently, players and teams with such dominant reigns like <strong class="chicago-bulls">Michael Jordan</strong> and the <strong class="chicago-bulls">Chicago Bulls</strong> or <strong class="la-lakers">Magic Johnson</strong> and 
              <strong class="la-lakers">the Los Angeles Lakers</strong> will never be forgotten, but what about other underrated and unnoticed teams like the <strong class="bucks">Milwaukee Bucks</strong>, who tallied a remarkable <strong>522</strong> wins in the 80s?  
            </p>            
            <p class="medium-small-text">
              You also might be wondering, <strong>why start from 1980?</strong> While this may seem arbitrary, it's not - it's personal preference. Almost 
              all of my favorite players are from the 1980s and up üòé. Also, the 80s and the 90s are arguably two of the most exciting eras of NBA basketball, 
              so why not start from then? 
            </p>
          </div>
        </div>
      </div>
      <div class="col-md-3 center-align">
        <figure class="figure">
          <img src="images/curry.gif" class="figure-img img-fluid rounded gif-width">
        </figure>
      </div>
    </div>
  </div>

  <br>
  <br>

  <!-- Section 2: Best Teams & Players -->
  <div class="container">
    <div class="row center-align">
      <div class="col">
        <h2>
          The Best Players and Teams in the 
          <span id="section2-season">
            <span class="dropdown">
              <button id="season-dropdown-button" class="btn btn-light dropdown-toggle season-dropdown" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                1980-81
              </button>
              <ul id="season-dropdown-menu" class="dropdown-menu" aria-labelledby="dropdownMenuButton1">
              </ul>
            </span>
          </span> 
          Season
        </h2>
      </div>
    </div>

    <div class="row center-align">
      <div class="col">
        <button id="start-stop-progression" class="btn btn-success" style="display: none;" onclick="renderBestTeamsAndPlayers(SEASON_START, SEASON_END, true);">
          ‚ñ∂Ô∏è Start
        </button>

      </div>
    </div>

    <br>

    <div class="row center-align">
      <div class="col-md-4"></div>
      <div class="col-md-4">
        <i>Hit the button above to start/stop the time progression. Click on any of the teams or players below to dive deeper into the stats.</i>
      </div>
      <div class="col-md-4"></div>
    </div>

    <br>
    
    <div class="row">
      <div class="col-md-4 small-margin-bottom">
        <div class="center-align medium-text small-margin-bottom">Eastern Conference</div>
        <div id="best-east-teams" ></div>
      </div>
      <div class="col-md-4 small-margin-bottom">
        <div class="center-align medium-text small-margin-bottom">Western Conference</div>
        <div id="best-west-teams"></div>
      </div>
      <div class="col-md-4 small-margin-bottom">
        <div class="center-align medium-text small-margin-bottom">Players</div>
        <div id="best-players"></div>
      </div>
    </div>

    <br>

    <div class="row center-align">
      <div class="col">
        <div id="section2-loader" class="spinner-border" role="status">
          <span class="visually-hidden">Loading...</span>
        </div>
      </div>
    </div>
  </div> 

  <br>
  <br>

  <!-- Section 3: How the Game has Changed Over Time -->
  <div class="container">
    <div class="row center-align">
      <div class="col">
        <h2>Compare Statistical Averages Throughout the Years</h2>
        <br>
        <div class="row">
          <div class="col-md-4"></div>
          <div class="col-md-4">
            <i>Select stats from the dropdown to be graphed and use the slider below the graph to change the time range.</i>
          </div>
          <div class="col-md-4"></div>
        </div>
        <br>
        <div id="stat-season-avgs">
          <span class="dropdown">
            <button id="statavg-dropdown-button" class="btn btn-light dropdown-toggle season-dropdown" type="button" data-bs-toggle="dropdown" aria-expanded="false">
              Statistics
            </button>
            <ul id="statavg-dropdown-menu" class="dropdown-menu" aria-labelledby="dropdownMenuButton1">
            </ul>
          </span>
        </div>
        <br> 
        <div id="stat-badges">
          <span id="3P" class="badge rounded-pill" style="background-color: #E74C3C">3-Point Makes</span>
        </div>
        <div style="display: flex">
          <span class="form-check form-switch" style="display: flex">
            <input class="form-check-input" type="checkbox" id="small-multiple-switch" onchange="onChangeSmallMultipleSwitch()">
            <label class="form-check-label" for="flexSwitchCheckDefault" style="margin-left: 5px;">Small multiples</label>
          </span>
          <span class="form-check form-switch" style="display: flex; margin-left: 20px;">
            <input class="form-check-input" type="checkbox" id="yaxis-0-switch" onchange="onChangeStartZeroSwitch()" checked>
            <label class="form-check-label" for="flexSwitchCheckDefault" style="margin-left: 5px;">Start y-axis from 0</label>
          </span>
        </div>
        <br>
        <div id="section-3-viz"></div>
        <div id="small-multiples" class="row"></div>
      </div>
    </div>
    <br>
    <br>
    <div id="slider-container" class="row" style="display: none;">
      <div class="col">
        <input type="text" id="slider" class="slider">
      </div>
    </div>
  </div>

  <br>
  <br>
  <br>

  <!-- Modal -->
  <div id="viz-modal" class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl">
      <div class="modal-content">
        <div class="modal-header">
          <h5 id="viz-modal-title" class="modal-title" id="staticBackdropLabel"></h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div id="viz-modal-body" class="modal-body">
          <ul class="nav nav-tabs" id="vizTab" role="tablist">
            <li class="nav-item" role="presentation">
              <button class="nav-link active" id="stat-tab" data-bs-toggle="tab" data-bs-target="#stat-chart" type="button" role="tab" aria-controls="stat-tab" aria-selected="true">Stats</button>
            </li>
            <li class="nav-item" role="presentation">
              <button class="nav-link" id="shot-tab" data-bs-toggle="tab" data-bs-target="#shot-chart" type="button" role="tab" aria-controls="shot-tab" aria-selected="false">Shot Chart</button>
            </li>
          </ul>
          <div class="tab-content" id="vizTabContent">
            <div class="tab-pane fade show active" id="stat-chart" role="tabpanel" aria-labelledby="stat-tab">
              <br>
              <div class="row">
                <div class="col">
                  <h5 id="diverging-line-title"></h5>
                  <div id="plus-minus">

                  </div>
                </div>
              </div>
              <hr>
              <div class="row">
                <div class="col">
                  <div class="row">
                    <div class="col">
                      <h5>Stats per Game</h5>
                    </div>
                    <div class="col" style="text-align: right;">
                      <span id="viz-modal-pergame">
                        <span class="dropdown">
                          <button id="variable-dropdown-button" class="btn btn-light dropdown-toggle season-dropdown" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                            
                          </button>
                          <ul id="variable-dropdown-menu" class="dropdown-menu" aria-labelledby="dropdownMenuButton1">
                          </ul>
                        </span>
                      </span> 
                    </div>
                  </div>
                  <div>
                    <span id="game-lost" class="badge rounded-pill" style="background-color: #EC7063">Game Lost</span>
                    <span id="game-won" class="badge rounded-pill" style="background-color: #52BE80">Game Won</span>
                  </div>
                  <div id="team-stats">

                  </div>
                </div>
              </div>
            </div>
            <div class="tab-pane fade" id="shot-chart" role="tabpanel" aria-labelledby="shot-tab">
              <br>
              <div class="row">
                <div class="col">
                  <h5>Shot Chart</h5>
                  <div>
                    <span class="badge rounded-pill" style="background-color: #52BE80">
                      Shot Made
                    </span>
                    <span class="badge rounded-pill" style="background-color: #EC7063">Shot Missed</span>
                  </div>
                  <div id="shot-chart-container" class="center-align">
                  </div>
                </div>          
              </div>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>

  <script>
    loadVizData(() => {
      document.getElementById("start-stop-progression").style.display = "inline-block";
      document.getElementById("slider-container").style.display = "block";
      // Section 2 
      renderBestTeamsAndPlayers("1980", "1981");
      renderSeasonDropdownOptions();
      // Section 3 
      renderSeasonAvgs();
      renderGraphSlider();
    }, (err) => {
      alert(err.message);
    });
  </script>

</body>
</html>